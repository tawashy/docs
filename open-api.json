{"openapi":"3.0.1","info":{"title":"Remat Application","version":"v1"},"servers":[{"url":"/spsr-api","description":"Default Server URL"}],"security":[{"basicAuth":[]}],"tags":[{"name":"Authentication","description":"authentication controller contains login, signup and create guest"}],"paths":{"/sites/public/site-capacity":{"put":{"tags":["site-controller"],"summary":"update the site capacity with one of two ways: 1- to send the updated capacity. 2- send the changed slots with  positive or negative value. body name:SiteModel .","operationId":"updateSiteCapacity","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateSiteCapacityModel"}}},"required":true},"responses":{"200":{"description":"successful operation","content":{"*/*":{"schema":{"$ref":"#/components/schemas/SiteCapacityResponse"}}}}}}},"/visitor-permits/public/active-permit":{"post":{"tags":["visitor-permit-controller"],"summary":"validate if this vehicle has active permit.","operationId":"hasActivePermit","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidateVehicleRequestModel"}}},"required":true},"responses":{"400":{"description":"Invalid Data"},"200":{"description":"successful checkout","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ValidateVehicleResponseModel"}}}}}}},"/violation/public/towed-vehicle-location":{"post":{"tags":["violation-controller"],"operationId":"addViolationTowedLocation","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ViolationAddTowedLocationRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/BaseResponseViolationAddTowedLocationResponse"}}}}}}},"/violation/public/create":{"post":{"tags":["violation-controller"],"operationId":"creatViolation","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/ViolationCreationModel"}}}},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/BaseResponseViolationCreationResponseModel"}}}}}}},"/tickets/public/active-ticket":{"post":{"tags":["ticket-controller"],"summary":"validate if this vehicle has active ticket.","operationId":"hasActiveTicket","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidateVehicleRequestModel"}}},"required":true},"responses":{"400":{"description":"Invalid Data"},"200":{"description":"successful checkout","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ValidateVehicleResponseModel"}}}}},"security":[{"Authorization":[]}]}},"/guest/tickets/public/ticket":{"post":{"tags":["ticket-guest-controller"],"summary":"request a ticket to perform a transaction .  body name :GuestTicketInitiationModel","operationId":"createPublicTicket","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublicTicketRequestModel"}}},"required":true},"responses":{"200":{"description":"successful checkout","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TicketInitiationResponseModel"}}}},"400":{"description":"Invalid Data"}}}},"/guest/tickets/public/initiate-automated-ticket":{"post":{"tags":["ticket-guest-controller"],"summary":"request a ticket to perform a transaction .  body name :AutomatedTicketRequestModel","operationId":"initiateAutomatedTicket","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AutomatedTicketRequestModel"}}},"required":true},"responses":{"200":{"description":"successful checkout","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TicketInitiationResponseModel"}}}},"400":{"description":"Invalid Data"}}}},"/guest/tickets/public/confirm-automated-ticket":{"post":{"tags":["ticket-guest-controller"],"summary":"request a ticket to perform a transaction .  body name :AutomatedTicketRequestModel","operationId":"confirmAutomatedTicket","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TicketConfirmationRequestModel"}}},"required":true},"responses":{"200":{"description":"successful checkout","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TicketInitiationResponseModel"}}}},"400":{"description":"Invalid Data"}}}},"/auth/public/token":{"post":{"tags":["Authentication"],"summary":"Generate System Token","operationId":"generateSystemTokenPublic","parameters":[{"name":"X-Client-Id","in":"header","required":true,"schema":{"type":"string"}},{"name":"X-Client-Secret","in":"header","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Successful operation","content":{"*/*":{"schema":{"$ref":"#/components/schemas/BaseResponse"}}}}}}},"/auth/public/refresh":{"post":{"tags":["Authentication"],"operationId":"refreshTokenPublic","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshTokenModel"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/BaseResponseObject"}}}}}}},"/violation/public/status/{violationId}":{"get":{"tags":["violation-controller"],"operationId":"getViolationStatus","parameters":[{"name":"violationId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/BaseResponseViolationStatusModel"}}}}}}}},"components":{"schemas":{"UpdateSiteCapacityModel":{"required":["zoneId"],"type":"object","properties":{"zoneId":{"type":"string","format":"uuid"},"availableCapacity":{"type":"integer","format":"int32"},"slotsChanged":{"type":"integer","format":"int32"}}},"SiteCapacityResponse":{"type":"object","properties":{"zoneId":{"type":"string","format":"uuid"},"availableSlots":{"type":"integer","format":"int32"}}},"ValidateVehicleRequestModel":{"required":["plateNumber","plateType","zoneId"],"type":"object","properties":{"zoneId":{"type":"string"},"plateNumber":{"type":"string"},"plateType":{"type":"string"}}},"ValidateVehicleResponseModel":{"type":"object","properties":{"hasActiveTicket":{"type":"boolean"}}},"ViolationAddTowedLocationRequest":{"required":["towedVehicleLatitude","towedVehicleLongitude","violationId"],"type":"object","properties":{"violationId":{"type":"string","format":"uuid"},"towedVehicleLatitude":{"type":"number","format":"double"},"towedVehicleLongitude":{"type":"number","format":"double"}}},"BaseResponseViolationAddTowedLocationResponse":{"type":"object","properties":{"code":{"type":"integer","format":"int32"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/ViolationAddTowedLocationResponse"}}},"ViolationAddTowedLocationResponse":{"type":"object","properties":{"violationId":{"type":"string","format":"uuid"},"towedVehicleLatitude":{"type":"number","format":"double"},"towedVehicleLongitude":{"type":"number","format":"double"}}},"ViolationCreationModel":{"required":["latitude","longitude","plateNumber","plateType","violationLocation","violationType","zoneId"],"type":"object","properties":{"id":{"type":"string","format":"uuid"},"violationDate":{"type":"string","format":"date-time"},"latitude":{"type":"number","format":"double"},"longitude":{"type":"number","format":"double"},"violationLocation":{"maxLength":2000,"minLength":0,"type":"string"},"violationEmpCode":{"type":"string"},"insertedUser":{"type":"string"},"imageDescription":{"type":"string"},"plateNumber":{"type":"string"},"plateType":{"type":"string"},"zoneId":{"type":"string","format":"uuid"},"image":{"type":"string","format":"binary"},"violationStatus":{"type":"string","enum":["INITIATED","RM_NATIONAL_ID","RM_WARNING_SMS","RM_VIOLATION","RM_IMAGE","RM_BILL","COMPLETED"]},"violationType":{"type":"string","enum":["NO_TICKET","TICKET_ENDED","USER_EXCEED_PARKING_TIME","WRONG_PARKING","RESERVED_PARKING","OBS_CLS_PARKING","EMRG_PARKING","ENT_EXT_PARKING","PROH_PARKING"]},"isSaudi":{"type":"boolean"}}},"BaseResponseViolationCreationResponseModel":{"type":"object","properties":{"code":{"type":"integer","format":"int32"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/ViolationCreationResponseModel"}}},"ViolationCreationResponseModel":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"canTow":{"type":"boolean"}}},"PublicTicketRequestModel":{"required":["bookedTime","countryCode","deviceId","isSaudiPlate","numberOfHours","paymentMethod","phoneNumber","plateNumber","plateType","startTime","ticketNumber","totalCost","zoneId"],"type":"object","properties":{"zoneId":{"type":"string","format":"uuid"},"totalCost":{"type":"number","format":"double"},"numberOfHours":{"type":"integer","format":"int32"},"firstName":{"type":"string"},"lastName":{"type":"string"},"countryCode":{"type":"string"},"phoneNumber":{"type":"string"},"plateNumber":{"type":"string"},"vehicleColor":{"type":"string"},"isSaudiPlate":{"type":"boolean"},"bookedTime":{"type":"string","format":"date-time"},"endTime":{"type":"string","format":"date-time"},"startTime":{"type":"string","format":"date-time"},"deviceId":{"type":"string"},"paymentMethod":{"type":"string","enum":["VISA","MASTER","CASH","POS","MADA","APPLEPAY","MASTERCARD"]},"plateType":{"type":"string"},"ticketNumber":{"type":"string"},"rrn":{"type":"string"}}},"TicketInitiationResponseModel":{"type":"object","properties":{"ticketId":{"type":"string","format":"uuid"}}},"AutomatedTicketRequestModel":{"required":["deviceId","isSaudiPlate","numberOfHours","plateNumber","plateType","zoneId"],"type":"object","properties":{"ticketId":{"type":"string","format":"uuid"},"zoneId":{"type":"string","format":"uuid"},"numberOfHours":{"type":"integer","format":"int32"},"firstName":{"type":"string"},"lastName":{"type":"string"},"countryCode":{"type":"string"},"phoneNumber":{"type":"string"},"plateNumber":{"type":"string"},"isSaudiPlate":{"type":"boolean"},"deviceId":{"type":"string"},"plateType":{"type":"string"}}},"TicketConfirmationRequestModel":{"type":"object","properties":{"ticketId":{"type":"string","format":"uuid"},"checkoutId":{"type":"string"}}},"BaseResponse":{"type":"object","properties":{"code":{"type":"integer","format":"int32"},"message":{"type":"string"},"data":{"type":"object"}}},"RefreshTokenModel":{"type":"object","properties":{"phoneNumber":{"type":"string"},"countryCode":{"type":"string"},"refreshToken":{"type":"string"}}},"BaseResponseObject":{"type":"object","properties":{"code":{"type":"integer","format":"int32"},"message":{"type":"string"},"data":{"type":"object"}}},"BaseResponseViolationStatusModel":{"type":"object","properties":{"code":{"type":"integer","format":"int32"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/ViolationStatusModel"}}},"ViolationStatusModel":{"required":["violationStatus"],"type":"object","properties":{"violationStatus":{"type":"string","enum":["INITIATED","RM_NATIONAL_ID","RM_WARNING_SMS","RM_VIOLATION","RM_IMAGE","RM_BILL","COMPLETED"]}}}},"securitySchemes":{"Authorization":{"type":"http","in":"header","scheme":"bearer","bearerFormat":"JWT"}}}}